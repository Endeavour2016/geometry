## Golang-基于空间索引的地理围栏判定优化实现


> 背景



> 什么是地理围栏?

地理围栏（Geo-fencing）是LBS的一种新应用，就是用一个虚拟的栅栏围出一个虚拟地理边界


> 如何生成判定点是否在多边形内?


射线法



> 如何快速匹配?
* geohash
* uberH3
* Google S2




> 最小外接矩形

最小外接矩形(minimum bounding rectangle,MBR),译为最小边界矩形
MBR

> 多边形边数较多怎么办?



> 判断线段是否在多边形内
* 首先，要判断一条线段是否在多边形内，先要判断线段的两个端点是否在多边形内。如果两个端点不全在多边形内，那么，线段肯定是不在多边形内的。
* 其次，如果线段和多边形的某条边内交（两线段内交是指两线段相交且交点不在两线段的端点），则线段肯定不在多边形内。
* 如果多边形的某个顶点和线段相交，则必须判断两相交交点之间的线段是否包含于多边形内。

### Reference
* https://mp.weixin.qq.com/s/2B-VJ2xgwxrmsSkE6zuoPA[闲鱼基于快速GeoHash实现海量商品与商圈高效匹配的算法]


